
1. HTTP协议是什么
2. HTTP请求
2.1 请求行
2.2 请求首部
2.3 请求体
3. HTTP响应
3.1 响应行
3.2 响应首部
3.3 响应体
4. HTTP状态码
5. HTTP之URI  URL
6. HTTP的工作原理
7. get和post的区别
8. 四种常见的 POST 提交数据方式 专题
9. 强制缓存和协商缓存有什么区别
9.1 什么是强缓存和协商缓存
9.2 浏览器缓存过程
9.3 浏览器常用刷新操作


1. 快速理解HTTP协议
2. 关于HTTP协议，一篇就够了
https://hit-alibaba.github.io/interview/basic/network/HTTP.html
http协议 （官方定义）：是一个基于TCP/IP通信协议来传递数据（HTML 文件, 图片文件, 查询结果等）
超文本指的是超链接的文本

1. HTTP协议是什么
客户端（浏览器）与服务器之间进行数据通信的一种协议，默认端口号为80；
协议规定了发送请求和响应结果的格式；
只能由客户端(浏览器)主动发送请求，服务器端接收请求处理后返回响应结果；
是一种无状态的协议，协议本身不记录客户端(浏览器)的历史请求记录；
是一种无连接的协议，限制每次连接只处理一个请求，服务器在处理完客户端的请求，并收到应答后，即断开连接，这样可以节省传输时间。


2. HTTP请求
由请求行、请求首部、请求体组成。



2.1 请求行
由请求方法（method）、请求URL（URI）、HTTP协议版本组成，以空格隔开。
HTTP协议中最常用的请求方法有：GET、POST、PUT、DELETE。
GET 方法获取数据，各种浏览器和服务器对整个URL长度有限制，一般为2~8kb；
POST方法：提交数据，理论上没有大小限制，出于安全考虑，服务器会做一定限制。

2.2 请求首部
给服务器提供额外的信息，比如：
User-Agent 用来表明客户端的身份，让服务器知道你是来自 Chrome 浏览器还是 FireFox；
HTTP/1.1 规定了47种首部字段类型。HTTP首部字段的格式很像 Python 中的字典类型，由键值对组成，中间用冒号隔开。比如：User-Agent: Mozilla/5.0；

因为客户端发送请求时，发送的数据（报文）是由字符串构成的，为了区分请求首部的结尾和请求体的开始，用一个空行来表示，遇到空行时，就表示这是首部的结尾，请求体的开始。

2.3 请求体
客户端提交给服务器的真正内容，比如表单信息、文件上传的数据等。

3. HTTP响应
由响应行、响应首部、响应体组成，与HTTP的请求格式相对应。


3.1 响应行
由服务端支持的 HTTP 协议版本号、状态码、以及对状态码的简短原因描述组成。

3.2 响应首部
响应首部和请求首部类似，用于对响应内容的补充，在首部里面可以告知
客户端响应体的数据类型是什么？响应内容返回的时间是什么时候，响应体是否压缩了，响应体最后一次修改的时间。

3.3 响应体
响应体（body）是服务器返回的真正内容，它可以是一个HTML页面，或者是一张图片、一段视频等等。

4. HTTP状态码
状态代码有三位数字组成，第一个数字定义了响应的类别，共分五种类别:
1xx：指示信息--表示请求已接收，继续处理
2xx：成功--表示请求已被成功接收、理解、接受
3xx：重定向--要完成请求必须进行更进一步的操作
4xx：客户端错误--请求有语法错误或请求无法实现
5xx：服务器端错误--服务器未能实现合法的请求
常见状态码：
 200 OK                        //客户端请求成功
	400 Bad Request               //客户端请求有语法错误，不能被服务器所理解
	401 Unauthorized              //请求未经授权，这个状态代码必须和WWW-Authenticate报头域一起使用 
	403 Forbidden                 //服务器收到请求，但是拒绝提供服务
	404 Not Found                 //请求资源不存在，eg：输入了错误的URL
	500 Internal Server Error     //服务器发生不可预期的错误
	503 Server Unavailable        //服务器当前不能处理客户端的请求，一段时间后可能恢复正常

更多状态码http://www.runoob.com/http/http-status-codes.html

5. HTTP之URI  URL
URI = Universal Resource Identifier 统一资源标志符， （比如身份证号码）
URL = Universal Resource Locator 统一资源定位符，用来标识某一处资源的地址 （比如某人的住址）
URN = Universal Resource Name 统一资源名称
这三者的关系如下图，url是uri的其中一种，是父子关系：


http://www.aspxfans.com:8080/news/index.asp?boardID=5&ID=24618&page=1#name
一个完整的URL包括以下几部分：
1.协议：“http：”，这代表网页使用的是HTTP协议。在Internet中可以使用多种协议，如HTTP，FTP等等本例中使用的是HTTP协议。在"HTTP"后面的“//”为分隔符
2.域名：该URL的域名部分为“www.aspxfans.com”。一个URL中，也可以使用IP地址作为域名使用， 比如10.45.9.71
3.端口：跟在域名后面的是端口，域名和端口之间使用“:”作为分隔符。端口不是一个URL必须的部分，如果省略端口部分，将采用默认端口80
4.虚拟目录：从域名后的第一个“/”开始到最后一个“/”为止，是虚拟目录部分。虚拟目录也不是一个URL必须的部分。本例中的虚拟目录是“/news/”
5.文件名：从域名后的最后一个“/”开始到“？”为止，是文件名部分，如果没有“?”,则是从域名后的最后一个“/”开始到“#”为止，是文件部分，如果没有“？”和“#”，那么从域名后的最后一个“/”开始到结束，都是文件名部分。本例中的文件名是“index.asp”。文件名部分也不是一个URL必须的部分，如果省略该部分，则使用默认的文件名
6.参数：从“？”开始到“#”为止之间的部分为参数部分，又称搜索部分、查询部分。本例中的参数部分为“boardID=5&ID=24618&page=1”。参数可以允许有多个参数，参数与参数之间用“&”作为分隔符
7.锚：从“#”开始到最后，都是锚部分。本例中的锚部分是“name”。锚部分也不是一个URL必须的部分

6. HTTP的工作原理
HTTP协议定义Web客户端如何从Web服务器请求Web页面，以及服务器如何把Web页面传送给客户端。HTTP协议采用了请求/响应模型。客户端向服务器发送一个请求报文，请求报文包含请求的方法、URL、协议版本、请求头部和请求数据。服务器以一个状态行作为响应，响应的内容包括协议的版本、成功或者错误代码、服务器信息、响应头部和响应数据。
以下是 HTTP 请求/响应的步骤：
1、客户端连接到Web服务器
一个HTTP客户端，通常是浏览器，与Web服务器的HTTP端口（默认为80）建立一个TCP套接字连接。例如，http://www.oakcms.cn。
2、发送HTTP请求
通过TCP套接字，客户端向Web服务器发送一个文本的请求报文，一个请求报文由请求行、请求头部、空行和请求数据4部分组成。
3、服务器接受请求并返回HTTP响应
Web服务器解析请求，定位请求资源。服务器将资源复本写到TCP套接字，由客户端读取。一个响应由状态行、响应头部、空行和响应数据4部分组成。
4、释放连接TCP连接
若connection 模式为close，则服务器主动关闭TCP连接，客户端被动关闭连接，释放TCP连接;若connection 模式为keepalive，则该连接会保持一段时间，在该时间内可以继续接收请求;
5、客户端浏览器解析HTML内容
客户端浏览器首先解析状态行，查看表明请求是否成功的状态代码。然后解析每一个响应头，响应头告知以下为若干字节的HTML文档和文档的字符集。客户端浏览器读取响应数据HTML，根据HTML的语	法对其进行格式化，并在浏览器窗口中显示。
例如：在浏览器地址栏键入URL，按下回车之后会经历以下流程：
1、浏览器向 DNS（域名系统） 服务器请求解析该 URL 中的域名所对应的 IP 地址;
2、解析出 IP 地址后，根据该 IP 地址和默认端口 80，和服务器建立TCP连接;
3、浏览器发出读取文件(URL 中域名后面部分对应的文件)的HTTP 请求，该请求报文作为 TCP 三次握手的第三个报文的数据发送给服务器;
4、服务器对浏览器请求作出响应，并把对应的 html 文本发送给浏览器;
5、释放 TCP连接;
6、浏览器将该 html 文本显示出来;

7. get和post的区别
                           GET                  POST    备注
传输数据 数据附在URL之后，以?分割url和传输数据，多个参数用&连接 将数据放到请求体中传输 
安全性 数据暴露在地址栏中，安全性低 安全性相对高 
传输数据大小 特定浏览器和服务器对URL长度有限制，一般为2KB~8KB 理论上没有限制，实际上服务器会进行限制 HTTP协议及协议规范均没有对传输的数据大小或URL长度进行限制
在浏览器回退时 无害 会再次提交请求 
参数的数据类型 只接受ASCII字符 无限制 
 url可以保存在书签栏，参数也会被保留在浏览器的历史记录里 url不会保存在书签栏，参数也不会被保留 
 只能进行url编码 支持多种编码方式 
GET和POST本质上就是TCP连接，并无差别。但是由于HTTP的规定和浏览器/服务器的限制，导致他们在应用过程中体现出一些不同：
简单的说：GET产生一个TCP数据包；POST产生两个TCP数据包。
长的说：
对于GET方式的请求，浏览器会把http header和data一并发送出去，服务器响应200（返回数据）；
而对于POST，浏览器先发送header，服务器响应100 continue，浏览器再发送data，服务器响应200 ok（返回数据）。

注意：
1. 据研究，在网络环境好的情况下，发一次包的时间和发两次包的时间差别基本可以无视。而在网络环境差的情况下，两次包的TCP在验证数据包完整性上，有非常大的优点。
2. 并不是所有浏览器都会在POST中发送两次包，Firefox就只发送一次。
（GET和POST能做的事情是一样一样的。你要给GET加上request body，给POST带上url参数，技术上是完全行的通的。）

参考文章： 99%的人都理解错了HTTP中GET与POST的区别

8. 四种常见的 POST 提交数据方式 专题

9. 强制缓存和协商缓存有什么区别
参考文章：
强制缓存和协商缓存有什么区别
http协商缓存VS强缓存

缓存作用：能够改善网页性能，提高用户体验。


9.1 什么是强缓存和协商缓存
强缓存： 不会向服务器发送请求，直接从缓存中读取资源，在Chrome控制台的NetWork选项中可以看到该请求返回200的状态码。
协商缓存： 向服务器发送请求，服务器会根据这个请求的request header的一些参数来判断是否命中协商缓存，如果命中，则返回304状态码并带上新的response header来通知浏览器从缓存中读取资源。

9.2 浏览器缓存过程
1. 浏览器第一次加载资源，服务器返回200，浏览器将资源文件从服务器上下载下来，并把response header及该请求的返回时间一并缓存；
2. 下一次加载资源时，先比较当前时间和上一次返回200时的时间差，如果没有超过Cache-Control设置的max-age，则没有过期，命中强缓存，不发请求直接从本地缓存读取该文件；如果时间过期，则向服务器发送请求并在header上带上If-Modified-Since和If-None-Match。（如果浏览器不支持HTTP1.1，则用expires判断是否过期）
3. 服务器收到请求后，优先根据Etag值来判断被请求的文件是否有修改，如果Etag值一致，则命中协商缓存，返回304状态码；
如果不一致，则有改动，直接返回新的资源文件，带上新的Etag值，返回状态码200。
4. 如果服务器收到的请求没有Etag值，则将If-Modified-Since和Last-Modified作比较，如果一致，则命中协商缓存，返回304状态码；
如果不一致，则返回新的资源问候，带上新的Last-Modified，返回状态码200。

9.3 浏览器常用刷新操作
点击刷新按钮或者按F5
浏览器直接对本地的缓存文件过期，但是会带上If-Modifed-Since，If-None-Match,这就意味着服务器会对文件检查新鲜度，返回结果可能是304，也有可能是200. （协商缓存）

用户按Ctrl+F5（强制刷新）
浏览器不仅会对本地文件过期，而且不会带上 If-Modifed-Since，If-None-Match，相当于之前从来没有请求过，返回结果是200. （无缓存）

地址栏回车
浏览器发起请求，按照正常流程，本地检查是否过期，然后服务器检查新鲜度，最后返回内容。（是否是强缓存 --> 协商缓存）

补充：
GMT 格林尼标准时间，世界标准时间
北京时间 = GMT时间 + 8小时

幂等： http://825635381.iteye.com/blog/2276077